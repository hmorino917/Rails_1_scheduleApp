<div class="container">
  <div class="contents-title">
    <h2>予定一覧</h2>
    <p><%= link_to "新規追加", new_post_path, class:"btn" %></p>
  </div>

  <% if flash[:notice] %>
    <p class="notice"><%= flash[:notice] %></p>
  <% end %>

  <table class="index-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>タイトル</th>
        <th>開始日</th>
        <th>終了日</th>
        <th>終日</th>
        <th>更新日時</th>
        <th>詳細</th>
        <th>編集</th>
        <th>削除</th>
      </tr>
    </thead>

    <tbody>
      <% @posts.each do |post| %>
        <tr>
          <td><%= post.id %></td>
          <td><%= post.title %></td>
          <td><%= post.start_date&.strftime("%Y/%m/%d") %></td>
          <td><%= post.end_date&.strftime("%Y/%m/%d") %></td>
          <td><%= post.all_day ? "◯" : "" %></td>
          <td><%= post.updated_at.strftime("%Y/%m/%d %H:%M") %></td>
          <td>
          <%= link_to"詳細",post,class:"link" %>
          </td>
          <td>
          <%= link_to"編集",[:edit,post],class:"link" %>
          </td>
          <td>
          <%= link_to"削除",post,method: :delete, data:{confirm:"本当に削除しますか？"},class:"link" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <footer>
    <div class="footer-contents">
      <p>予定合計 <span><%= @total_posts %></span> 件</p>
      <p>本日の日付 : <%= Date.today.strftime("%Y/%m/%d") %></p>
    </div>
  </footer>

</div>